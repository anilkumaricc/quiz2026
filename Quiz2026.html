<!-- FILE: Quiz2026.html
     Place this on GitHub Pages — it asks for a password and on success redirects to the Apps Script INDEX webapp URL (defined in config.js).
-->
<!doctype html>
<html lang="hi">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Quiz — Unlock</title>
<link rel="icon" href="data:," />
<style>
  :root{
    --bg:#071026; --card:#0f1724; --accent:#2563eb; --muted:#98abc5;
    font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  }
  html,body{height:100%;margin:0;background:
    radial-gradient(900px 400px at 70% -10%, rgba(37,99,235,0.12), transparent),
    linear-gradient(180deg,#02040a,#071026); color:#e8f2ff; display:flex; align-items:center; justify-content:center;}
  .card{width:460px; max-width:94%; background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); border:1px solid rgba(255,255,255,0.04); border-radius:12px; padding:22px; box-shadow:0 10px 40px rgba(2,6,23,0.6)}
  h1{margin:0 0 6px 0; font-size:20px}
  p.lead{margin:0 0 14px 0; color:var(--muted)}
  label{display:block;font-size:13px;color:var(--muted); margin-bottom:6px}
  input[type="password"]{width:100%; padding:12px 10px; border-radius:10px; border:1px solid rgba(255,255,255,0.04); background:rgba(255,255,255,0.01); color:inherit; box-sizing:border-box}
  .row{display:flex; gap:8px; margin-top:12px}
  .btn{padding:10px 14px; border-radius:10px; background:linear-gradient(90deg,var(--accent),#1e40af); color:white; border:none; cursor:pointer; font-weight:600}
  .btn.ghost{background:transparent;border:1px solid rgba(255,255,255,0.04); color:var(--muted)}
  .muted{color:var(--muted);font-size:13px;margin-top:12px}
  .feedback{height:18px;margin-top:8px;color:#ffb4b4;font-size:13px}
  .small{font-size:13px;color:var(--muted)}
  .hint{font-size:12px; color: rgba(255,255,255,0.6); margin-top:8px}
</style>
</head>
<body>
  <div class="card" role="dialog" aria-labelledby="title">
    <h1 id="title">Quiz — Password Required</h1>
    <p class="lead">Is quiz ko kholne ke liye password darj karein. Agar aap teacher/administrator hain to valid password use karein.</p>

    <label for="pwd">Password</label>
    <input id="pwd" type="password" autocomplete="off" placeholder="Password dijiye" />

    <div class="row">
      <button id="unlockBtn" class="btn">Unlock</button>
      <button id="clearBtn" class="btn ghost">Clear</button>
    </div>

    <div class="feedback" id="feedback" aria-live="polite"></div>

    <div class="muted small">Contact admin if you don't have the password.</div>
    <div class="hint">Note: This is a convenience gate. For strong security store passwords server-side.</div>
  </div>

<!-- include config.js from GitHub Pages -->
<script src="https://anilkumaricc.github.io/config.js"></script>

<script>
/*
  Quiz2026.html
  - Loads config.js for ENDPOINT
  - Prompts for password (client-side list)
  - On success: redirects to Apps Script webapp INDEX
*/
const VALID_PASSWORDS = ['hatta2025','quizideal','adca2025']; // allowed passwords (client-side convenience)
const unlockBtn = document.getElementById('unlockBtn');
const clearBtn = document.getElementById('clearBtn');
const pwdInput = document.getElementById('pwd');
const fb = document.getElementById('feedback');

function showMessage(msg, ok=true){
  fb.textContent = msg;
  fb.style.color = ok ? '#b6ffcd' : '#ffb4b4';
}

function clearMessage(){
  fb.textContent = '';
}

clearBtn.addEventListener('click', ()=> {
  pwdInput.value = '';
  pwdInput.focus();
  clearMessage();
});

pwdInput.addEventListener('keydown', (e)=> {
  if(e.key === 'Enter') unlockBtn.click();
});

unlockBtn.addEventListener('click', ()=> {
  const v = (pwdInput.value || '').trim().toLowerCase();
  if(!v){ showMessage('Please enter password', false); pwdInput.focus(); return; }
  if(!VALID_PASSWORDS.includes(v)){
    showMessage('गलत पासवर्ड — दुबारा कोशिश करें', false);
    pwdInput.focus();
    return;
  }

  showMessage('Password accepted — Redirecting...', true);

  try{ sessionStorage.setItem('quizUnlocked', '1'); }catch(e){}

  // Read ENDPOINT from config (loaded from GitHub Pages)
  const indexUrl = (window.ADCA && window.ADCA.ENDPOINT) ? window.ADCA.ENDPOINT : null;
  if(!indexUrl){
    showMessage('Server URL not configured. Configure ENDPOINT in config.js', false);
    return;
  }

  // optional pass-through (pi/roll) if present
  const params = new URLSearchParams();
  try{
    const reg = JSON.parse(localStorage.getItem('studentData') || '{}');
    if(reg.pi) params.set('pi', reg.pi);
    if(reg.roll) params.set('roll', reg.roll);
  }catch(e){}

  const dest = params.toString() ? (indexUrl + '?action=index&' + params.toString()) : indexUrl + '?action=index';
  setTimeout(()=> { location.href = dest; }, 350);
});
</script>
</body>
</html>
